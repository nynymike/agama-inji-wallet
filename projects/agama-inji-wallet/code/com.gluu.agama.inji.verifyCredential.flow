Flow com.gluu.agama.inji.verifyCredential
     Basepath ""
// Flow Starting
Log "@info Start executing Agama-Inji wallet flow"
// Feedback message
feedback = {}
// Max repeate
Repeat 1 times max
     // Create an instance of Agma-inji verification Service
     agamaInjiVerificationService = Call org.gluu.agama.inji.AgamaInjiVerificationService#getInstance 
     // Send an Authorization Request to Inji verify endpoint
     serviceVerificationResult = Call agamaInjiVerificationService verifyServiceURL 
     // Check verification result.
     When serviceVerificationResult.valid is true
          // The service has been verified
          Log "@info The service has been verified"
          // Construct OpenID4VP Request url for RFAC call
          rfacUrl = Call agamaInjiVerificationService createOpenidRequestUrl serviceVerificationResult.requestId serviceVerificationResult.transactionId
          // Making RFAC call
          Log "@info Making RFAC call to Inji web  app. URL is : %"  rfacUrl
          // Inji web app response
          resultFromApp = RFAC rfacUrl
          // Verify apps returned result
          Log "@info Verify external app return result"
          // verify final result
          verifyFinalStatus = Call agamaInjiVerificationService verifyInjiAppResult resultFromApp
     Otherwise
          // The service has been not verified
          Log "@error The service has been not verified"
          // Error message
          feedback.errorMessage = serviceVerificationResult.message